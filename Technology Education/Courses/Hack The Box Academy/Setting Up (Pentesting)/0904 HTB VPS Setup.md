# VPS Setup

When setting up a Virtual Private Server ( #VPS ) a key step in this process is to make sure we have created a proper folder structure hierarchy and place the services in the correct realms of this structure. We can accomplish this with a VPS provider, and in this case we will use #Vultr. After installing Vultr, we can use one of their four available layouts - we will choose Cloud Compute for this lesson.

#### Location

Next we will have the option of choosing a location. In order to have a strong connection, you should choose a server location that is as close to your physical location as possible. 

#### Server Type

This menu will allow you to choose what kind of operating system ( #OS) you want to install from the VPS provider. You will have many options from the #Linux varieties, as well as choice between 63 and 32 bit operating systems. For the purposes of the module we chose the Ubuntu 20.04 x64 variant as it is compatible with Debian and the Parrot OS that HTB uses for exercises.

This window will also allow you to upload your own #ISO images for other operating systems.

#### Server Plans

The default server size allows for only 1024 MB of #RAM - any more than that and you will have to pay a monthly rate for some storage space. Depending on your needs, you can evaluate the plans available and determine what you will need to accomplish an maintain your goals.


Most server plant offer the options to enable #IPv6 for free. There are additional services like Auto-backup, #DDOS Protection, and VPN options for an additional price per month.

#### SSH Keys

Once we have configured the server and submitted payment credentials, we can then use the VPS, VM, or our home client to generate SSH Keys for remote access. In the case of this module, we will be proceeding with the VM to generate the Key Pair for SSH access.

We can generate the key pair on our VM with the following command:

> ssh-keygen -t rsa -b 4096 -f vps-ssh

This command will generate two unique keys - the vps-ssh key is the private key and should not be shared. The vps-ssh.pub key is the public key that needs to be submitted to the control panel within the Vultr interface.

The following command will reveal information related to both of the generated keys:

> ls -l vps* 

You will then be prompted to supply a #hostname for the server and an associated label to help us remember what the host is functioning as. In this case it is a VPS service.

Once the VPS is installed, we can use SSH with the following command:

> ssh root@\<VPS IP ADDRESS>

After you access the VPS, you MUST MAKE DAMN SURE THAT YOU DON'T LEAVE THE MF SYSTEM IN ROOT. CREATE A MF ADDITIONAL USER PLEEEAASSSEEEE with the following command:

adduser harriewonderwood

We add the SSH Public Key to the Vps with the following command:

> mkdir ~/.ssh
> echo '\<vps-ssh.pub>' > ~/.ssh/authorized_keys
> chmod 600 ~/.ssh/authorized_keys

Now we can use the private SSH key to log into the VPS:

> ssh harriewonderwood@\<vps-ip-address> -i vps-ssh

